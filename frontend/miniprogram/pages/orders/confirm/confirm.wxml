<!-- pages/orders/confirm/confirm.wxml -->
<view class="container">
  <!-- é…é€åœ°å€ -->
  <view class="address-section" bindtap="selectAddress">
    <view wx:if="{{address}}" class="address-content">
      <view class="address-header">
        <text class="contact-name">{{address.contactName}}</text>
        <text class="contact-phone">{{address.contactPhone}}</text>
      </view>
      <view class="address-detail">
        {{address.province}} {{address.city}} {{address.district}} {{address.detailAddress}}
      </view>
    </view>
    <view wx:else class="no-address">
      <text class="location-icon">ğŸ“</text>
      <text>é€‰æ‹©é…é€åœ°å€</text>
      <text class="arrow">></text>
    </view>
  </view>

  <!-- è®¢å•ç±»å‹é€‰æ‹© -->
  <view class="order-type-section">
    <view class="section-title">è®¢å•ç±»å‹</view>
    <view class="type-options">
      <view class="type-option {{orderType === 'TAKEOUT' ? 'active' : ''}}" bindtap="selectType" data-type="TAKEOUT">
        <text>å¤–å–</text>
      </view>
      <view class="type-option {{orderType === 'DINE_IN' ? 'active' : ''}}" bindtap="selectType" data-type="DINE_IN">
        <text>å ‚é£Ÿ</text>
      </view>
    </view>
  </view>

  <!-- å•†å“åˆ—è¡¨ -->
  <view class="items-section">
    <view class="section-title">å•†å“æ¸…å•</view>
    <view class="item-list">
      <view class="item" wx:for="{{items}}" wx:key="id">
        <image class="item-image" src="{{item.image}}" mode="aspectFill"></image>
        <view class="item-info">
          <text class="item-name">{{item.dishName}}</text>
          <text class="item-price">Â¥{{item.price}}</text>
        </view>
        <text class="item-quantity">x{{item.quantity}}</text>
      </view>
    </view>
  </view>

  <!-- å¤‡æ³¨ -->
  <view class="remark-section">
    <view class="section-title">å¤‡æ³¨</view>
    <textarea 
      class="remark-input" 
      placeholder="è¯·è¾“å…¥å¤‡æ³¨ä¿¡æ¯ï¼ˆé€‰å¡«ï¼‰" 
      value="{{remark}}"
      bindinput="onRemarkInput"
      maxlength="200"
    ></textarea>
  </view>

  <!-- ä»·æ ¼æ˜ç»† -->
  <view class="price-section">
    <view class="price-row">
      <text class="price-label">å•†å“æ€»é¢</text>
      <text class="price-value">Â¥{{totalPrice}}</text>
    </view>
    <view class="price-row" wx:if="{{orderType === 'TAKEOUT'}}">
      <text class="price-label">é…é€è´¹</text>
      <text class="price-value">Â¥{{deliveryFee}}</text>
    </view>
    <view class="price-row total">
      <text class="price-label">å®ä»˜é‡‘é¢</text>
      <text class="price-value highlight">Â¥{{actualAmount}}</text>
    </view>
  </view>

  <!-- æäº¤æŒ‰é’® -->
  <view class="submit-bar">
    <view class="total-info">
      <text class="total-label">åˆè®¡ï¼š</text>
      <text class="total-price">Â¥{{actualAmount}}</text>
    </view>
    <view class="submit-btn" bindtap="submitOrder">æäº¤è®¢å•</view>
  </view>
</view>
